<!DOCTYPE html>
<html>

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <style>
        canvas {
            border:1px solid black;
            background-color: lightgrey;
        }
    </style>
</head>
<body onload="myGameArea.start()" >

<div>Time Remaining <span id="time"></span></div>
<button onClick="gameStartfunction ()">Start</button>
<script>

    var recPiece, triPiece, cirPiece, myScoreBoard,container;
    var int;
    function startGame() {
<<<<<<< HEAD
    	int=Math.random();
    	if(0<int&&int<0.333){
        recPiece = new recComponent(55, 55, "red", 10, 10);}
        else if(0.333<=int&&int<0.666){
        triPiece = new triComponent(60, 60, "yellow", 400, 50);}
        else{
        cirPiece = new cirComponent(30, "blue", 220, 50);};

        
        /*recPiece = new recComponent(55, 55, "red", 10, 10);
       
        triPiece = new triComponent(60, 60, "yellow", 400, 50);
       
        cirPiece = new cirComponent(30, "blue", 220, 50);*/
        container= new drawContainer(340, 920, 60, 30, 70);
=======
        recPiece = new recComponent(55, 55, "red", 10, 20);
        triPiece = new triComponent(60, 60, "yellow", 400, 50);
        cirPiece = new cirComponent(30, "blue", 220, 50);
        container= new drawContainer(340, 420, 30, 15, 70);
>>>>>>> 0de6e5d12150373e271f443907169682d9875b29
        myScoreBoard= new ScoreBoard(280, 40);
    }

    var myGameArea = {
        canvas : document.createElement("canvas"),
        start : function() {
            this.canvas.width = 680;
            this.canvas.height = 500;
            this.context = this.canvas.getContext("2d");
            document.body.insertBefore(this.canvas, document.body.childNodes[0]);
<<<<<<< HEAD
            this.interval = setInterval(updateGameArea, 1000);
            //updateGameArea();
=======
            updateGameArea();
>>>>>>> 0de6e5d12150373e271f443907169682d9875b29
        },
        clear : function() {
            this.context.clearRect(0, 0, this.canvas.width, this.canvas.height);
        }
    }

    function recComponent(width, height, color, x, y) {
        this.update = function(){
            ctx = myGameArea.context;
            ctx.fillStyle = color;
            ctx.fillRect(x, y, width, height);
        }
    }

    function triComponent(width, height, color, x, y) {
        this.update = function(){
            ctx = myGameArea.context;
            ctx.beginPath();
            ctx.moveTo(x, (y-height/2));
            ctx.lineTo((x-width/2), (y+height/2));
            ctx.lineTo((x+width/2), (y+height/2));
            ctx.lineTo(x, (y-height/2));
            ctx.fillStyle = color;
            ctx.fill();
        }
    }

    function cirComponent(radius, color, x, y) {
        this.update = function(){
            ctx = myGameArea.context;
            ctx.beginPath();
            ctx.arc(x, y, radius, 0, 2*Math.PI);
            ctx.fillStyle = color;
            ctx.fill();

        }
    }

    function ScoreBoard(x, y) {
        this.score=0;
        ctx = myGameArea.context;
        var fontHeight = 20;
        ctx.font = fontHeight + "px Arial";
        var color = "black";
        var display = "Score ";
        this.update = function(){
            var txt = display + this.score;
            ctx.fillStyle = color;
            ctx.clearRect(x,y-fontHeight, ctx.measureText(txt).width, fontHeight);
            ctx.fillText(txt, x, y);
        }
    }

    function drawContainer(x, y, rw, rh, h) {
        this.update=function(){
            ctx = myGameArea.context;
            // 1. global variables are evil (least power rule, prefer local variable over instance variable. Prefer instance variable over global variable).
            // 2. mutations are evil.
            // ctx.save();
            // ctx.scale(1,  rw/rh);
            ctx.beginPath();
            ctx.ellipse(x, y, rw, rh, Math.PI, 0, 2 * Math.PI);

            // ctx.arc(x, y, rw, 0, 2 * Math.PI);
            ctx.moveTo((x-rw),y);
            ctx.lineTo((x-rw),(y+h));
            ctx.lineTo((x+rw),(y+h));
            ctx.lineTo((x+rw),y);
            ctx.restore();
            ctx.lineWidth=4;
            ctx.strokeStyle="orange";
            ctx.stroke();
        }
    }

    function updateGameArea() {
        myGameArea.clear();
        startGame();
<<<<<<< HEAD
        
    	if(0<int&&int<0.333){
        recPiece.x += 0;
        recPiece.y += 0;}
        else if(0.333<=int&&int<0.666){
        triPiece.x -= 0;
        triPiece.y += 0;}
        else{
        cirPiece.x += 0;
        cirPiece.y += 0;};
        //cirPiece.x += 0;
        //cirPiece.y += 0;
        //recPiece.x += 0;
        //recPiece.y += 0;
        //triPiece.x -= 0;
        //triPiece.y += 0;
        scoreBoard.x+=0;
        scoreBoard.y+=0;
        if(0<int&&int<0.333){
        recPiece.update();}
        else if(0.333<=int&&int<0.666){
        triPiece.update();}
        else{
        cirPiece.update();}
=======
        recPiece.update();
        cirPiece.update();
        triPiece.update();
>>>>>>> 0de6e5d12150373e271f443907169682d9875b29
        scoreBoard.update();
        myScoreBoard.update();
    }

    var draggable = false;

    function myMove(e){
        if (draggable){
<<<<<<< HEAD
            console.log("e.pageX " + e.pageX);
            console.log("e.pageY " + e.pageY);
            console.log("myGameArea.canvas.offsetLeft " + myGameArea.canvas.offsetLeft);
            console.log("myGameArea.canvas.offsetTop " + myGameArea.canvas.offsetTop);
            triPiece.x = e.pageX - myGameArea.canvas.offsetLeft;
            triPiece.y = e.pageY - myGameArea.canvas.offsetTop;

           // triPiece.x = e.pageX - canvas.offsetLeft;
           // triPiece.y = e.pageY - canvas.offsetTop;
            console.log("triPiece.pageX " + triPiece.x);
            console.log("triPiece.pageY " + triPiece.y);
=======
            // console.log("e.pageX ", e.pageX);
            // console.log("e.pageY ", e.pageY);
            // console.log("e.clientX ", e.clientX);
            // console.log("e.clientY ", e.clientY);
            // console.log("e.screenX ", e.screenX);
            // console.log("e.screenY ", e.screenY);
            // console.log("myGameArea.canvas.offsetLeft ", myGameArea.canvas.offsetLeft);
            // console.log("myGameArea.canvas.offsetTop ", myGameArea.canvas.offsetTop);
            triPiece.x = e.clientX;
            triPiece.y = e.clientY;
>>>>>>> 0de6e5d12150373e271f443907169682d9875b29
            triPiece.update();
        }

       
    }

<<<<<<< HEAD
    function myDown(e){
		if (e.pageX < triPiece.x + 30 + myGameArea.canvas.offsetLeft && e.pageX > triPiece.x - 30 +
            myGameArea.canvas.offsetLeft && e.pageY < triPiece.y + 30 + myGameArea.canvas.offsetTop &&
            e.pageY > triPiece.y -30 + myGameArea.canvas.offsetTop){
            
        
         triPiece.x = e.pageX - canvas.offsetLeft;
        triPiece.y = e.pageY - canvas.offsetTop;
    }

    
=======
    function dragDown(e){
>>>>>>> 0de6e5d12150373e271f443907169682d9875b29
        draggable = true;
        myGameArea.canvas.onmousemove = myMove;

    }

    function scoreUp(e){
        // if (e.pageX < triPiece.x + 40 + myGameArea.canvas.offsetLeft && e.pageX > triPiece.x - 40 +
        //     myGameArea.canvas.offsetLeft && e.pageY < triPiece.y + 40 + myGameArea.canvas.offsetTop &&
        //     e.pageY > triPiece.y -40 + myGameArea.canvas.offsetTop){
        if (e.clientX > 340 && e.clientX < 400 && e.clientY > 405 && e.clientY < 490){

            console.log("e.clientX ", e.clientX);
            console.log("e.clientY ", e.clientY);
            console.log("e.pageX ", e.pageX);
            console.log("e.pageY ", e.pageY);
            console.log("myScoreBoard ", myScoreBoard);
            console.log("myScoreBoard.score ", myScoreBoard.score);
            myScoreBoard.score+=1;
            console.log("myScoreBoard1 ", myScoreBoard);
            console.log("myScoreBoard.score1 ", myScoreBoard.score);
            myScoreBoard.update();
        }

        
        draggable = false;
        myGameArea.canvas.onmousemove = null;
    }


<<<<<<< HEAD
   /* function myMove(e){
        if (draggable&&0.333<=int&&int<0.666){
            console.log("e.pageX " + e.pageX);
            console.log("e.pageY " + e.pageY);
            console.log("myGameArea.canvas.offsetLeft " + myGameArea.canvas.offsetLeft);
            console.log("myGameArea.canvas.offsetTop " + myGameArea.canvas.offsetTop);
            triPiece.x = e.pageX - myGameArea.canvas.offsetLeft;
            triPiece.y = e.pageY - myGameArea.canvas.offsetTop;
            console.log("triPiece.pageX " + triPiece.x);
            console.log("triPiece.pageY " + triPiece.y);
            triPiece.update();
        }

        else if (draggable&&0<int&&int<0.333){
            console.log("e.pageX " + e.pageX);
            console.log("e.pageY " + e.pageY);
            console.log("myGameArea.canvas.offsetLeft " + myGameArea.canvas.offsetLeft);
            console.log("myGameArea.canvas.offsetTop " + myGameArea.canvas.offsetTop);
            recPiece.x = e.pageX - myGameArea.canvas.offsetLeft;
            recPiece.y = e.pageY - myGameArea.canvas.offsetTop;
            console.log("triPiece.pageX " + triPiece.x);
            console.log("triPiece.pageY " + triPiece.y);
            recPiece.update();
        }

        else (draggable&&int=>0.666&&int<1){
            console.log("e.pageX " + e.pageX);
            console.log("e.pageY " + e.pageY);
            console.log("myGameArea.canvas.offsetLeft " + myGameArea.canvas.offsetLeft);
            console.log("myGameArea.canvas.offsetTop " + myGameArea.canvas.offsetTop);
            cirPiece.x = e.pageX - myGameArea.canvas.offsetLeft;
            cirPiece.y = e.pageY - myGameArea.canvas.offsetTop;
            console.log("triPiece.pageX " + triPiece.x);
            console.log("triPiece.pageY " + triPiece.y);
            cirPiece.update();
        }
    }

    function myDown(e){
		if (0.333<=int&&int<0.666&& e.pageX < triPiece.x + 30 + myGameArea.canvas.offsetLeft && e.pageX > triPiece.x - 30 +
            myGameArea.canvas.offsetLeft && e.pageY < triPiece.y + 30 + myGameArea.canvas.offsetTop &&
            e.pageY > triPiece.y -30 + myGameArea.canvas.offsetTop){
            
        
         triPiece.x = e.pageX - canvas.offsetLeft;
        triPiece.y = e.pageY - canvas.offsetTop;
    }

    else if (0<int&&int<0.333&&e.pageX < recPiece.x + 30 + myGameArea.canvas.offsetLeft && e.pageX > recPiece.x - 30 +
            myGameArea.canvas.offsetLeft && e.pageY < recPiece.y + 30 + myGameArea.canvas.offsetTop &&
            e.pageY > recPiece.y -30 + myGameArea.canvas.offsetTop){
            
        
         recPiece.x = e.pageX - canvas.offsetLeft;
        recPiece.y = e.pageY - canvas.offsetTop;
    }

    else (e.pageX < cirPiece.x + 30 + myGameArea.canvas.offsetLeft && e.pageX > cirPiece.x - 30 +
            myGameArea.canvas.offsetLeft && e.pageY < cirPiece.y + 30 + myGameArea.canvas.offsetTop &&
            e.pageY > cirPiece.y -30 + myGameArea.canvas.offsetTop){
            
        
         cirPiece.x = e.pageX - canvas.offsetLeft;
        cirPiece.y = e.pageY - canvas.offsetTop;
    }
        draggable = true;
        myGameArea.canvas.onmousemove = myMove;

    }

    function myUp(e){
        if (0.333<=int&&int<0.666&&e.pageX < triPiece.x + 40 + myGameArea.canvas.offsetLeft && e.pageX > triPiece.x - 40 +
            myGameArea.canvas.offsetLeft && e.pageY < triPiece.y + 40 + myGameArea.canvas.offsetTop &&
            e.pageY > triPiece.y -40 + myGameArea.canvas.offsetTop){
            console.log("myScoreBoard ", myScoreBoard);
            console.log("myScoreBoard.score ", myScoreBoard.score);
            myScoreBoard.score+=1;
            console.log("myScoreBoard1 ", myScoreBoard);
            console.log("myScoreBoard.score1 ", myScoreBoard.score);
            myScoreBoard.update();
        }

        else if (0<int&&int<0.333&&e.pageX < recPiece.x + 40 + myGameArea.canvas.offsetLeft && e.pageX > recPiece.x - 40 +
            myGameArea.canvas.offsetLeft && e.pageY < recPiece.y + 40 + myGameArea.canvas.offsetTop &&
            e.pageY > recPiece.y -40 + myGameArea.canvas.offsetTop){
            console.log("myScoreBoard ", myScoreBoard);
            console.log("myScoreBoard.score ", myScoreBoard.score);
            myScoreBoard.score+=1;
            console.log("myScoreBoard1 ", myScoreBoard);
            console.log("myScoreBoard.score1 ", myScoreBoard.score);
            myScoreBoard.update();
        }

        else (e.pageX < cirPiece.x + 40 + myGameArea.canvas.offsetLeft && e.pageX > cirPiece.x - 40 +
            myGameArea.canvas.offsetLeft && e.pageY < cirPiece.y + 40 + myGameArea.canvas.offsetTop &&
            e.pageY > cirPiece.y -40 + myGameArea.canvas.offsetTop){
            console.log("myScoreBoard ", myScoreBoard);
            console.log("myScoreBoard.score ", myScoreBoard.score);
            myScoreBoard.score+=1;
            console.log("myScoreBoard1 ", myScoreBoard);
            console.log("myScoreBoard.score1 ", myScoreBoard.score);
            myScoreBoard.update();
        }
        draggable = false;
        myGameArea.canvas.onmousemove = null;
    }*/


    myGameArea.canvas.onmousedown = myDown;
    myGameArea.canvas.onmouseup = myUp;
=======
    myGameArea.canvas.onmousedown = dragDown;
    myGameArea.canvas.onmouseup = scoreUp;
>>>>>>> 0de6e5d12150373e271f443907169682d9875b29

    function startTimer(duration, display) {
        var start = Date.now(),
            diff,
            minutes,
            seconds;
        function timer() {
            diff = duration - (((Date.now() - start) / 1000) | 0);
            minutes = parseInt(diff / 60);
            seconds= (diff % 60) | 0;

            minutes = minutes < 10 ? "0" + minutes : minutes;
            seconds = seconds < 10 ? "0" + seconds : seconds;

            display.textContent = minutes + ":" + seconds;
            if (diff<=0) {
                clearInterval(t);
            }
        }
        timer();
        var t=setInterval(timer, 1000);
    }

    function gameStartfunction () {
       // startGame();
        var oneMinutes = 60 ,
            display = document.querySelector('#time');
        startTimer(oneMinutes, display);
    };

</script>
</body>
</html>